# ğŸ® HÆ°á»›ng Dáº«n Setup Há»‡ Thá»‘ng Star Collection System

## ğŸ“‹ Tá»•ng Quan
Há»‡ thá»‘ng nÃ y táº¡o cÆ¡ cháº¿:
- Diá»‡t 1 zombie â†’ +1 sao xuáº¥t hiá»‡n trÃªn gÃ³c pháº£i UI
- Thu tháº­p Ä‘á»§ 6 sao â†’ Hiá»ƒn thá»‹ Victory Panel
- Animation Ä‘áº¹p máº¯t cho cÃ¡c sao

---

## ğŸ¯ BÆ°á»›c 1: Setup Canvas UI

### 1.1 Táº¡o Star Display UI (GÃ³c pháº£i mÃ n hÃ¬nh)

1. **Táº¡o Canvas** (náº¿u chÆ°a cÃ³):
   - Hierarchy â†’ Right Click â†’ UI â†’ Canvas
   - Canvas â†’ Canvas Scaler: Scale With Screen Size
   - Reference Resolution: 1920x1080

2. **Táº¡o Star Container Panel**:
   ```
   Canvas
   â””â”€â”€ StarDisplayPanel (Panel/Empty GameObject)
       â”œâ”€â”€ StarCountText (TextMeshPro)
       â”œâ”€â”€ StarIconContainer (Horizontal Layout Group)
       â”‚   â””â”€â”€ StarIcon (Image) x6 (auto-generated by script)
   ```

3. **Setup StarDisplayPanel**:
   - **Anchor**: Top-Right
   - **Position**: X: -100, Y: -50
   - **Size**: Width: 300, Height: 80
   - **Background**: Semi-transparent (0, 0, 0, 100)

4. **Setup StarCountText**:
   - Font: Any TextMeshPro font
   - Font Size: 32
   - Color: White
   - Alignment: Center
   - Text: "â­ 0/6"

5. **Setup StarIconContainer**:
   - Add Component: **Horizontal Layout Group**
     - Spacing: 10
     - Child Alignment: Middle Center
     - Child Force Expand: Width & Height OFF
   - Add Component: **Content Size Fitter**
     - Horizontal Fit: Preferred Size

---

## ğŸŒŸ BÆ°á»›c 2: Táº¡o Star Icon Prefab

1. **Táº¡o Star Icon UI Prefab**:
   - Hierarchy â†’ Right Click â†’ UI â†’ Image
   - Rename: "StarIcon"
   - **Size**: 50x50
   - **Sprite**: TÃ¬m hoáº·c import star sprite (â­)
     - Náº¿u khÃ´ng cÃ³ sprite, dÃ¹ng text "â­" vá»›i TextMeshPro
   - **Color**: Yellow (255, 255, 0, 255)

2. **Convert to Prefab**:
   - KÃ©o "StarIcon" tá»« Hierarchy vÃ o folder Prefabs
   - Delete StarIcon khá»i Hierarchy

---

## ğŸ¯ BÆ°á»›c 3: Setup StarCollectionSystem GameObject

1. **Táº¡o GameObject**:
   - Hierarchy â†’ Right Click â†’ Create Empty
   - Rename: "StarCollectionSystem"

2. **Add Script Component**:
   - Add Component â†’ StarCollectionSystem

3. **Configure Inspector**:

   **Star Settings:**
   - Max Stars: `6`
   - Current Stars: `0`

   **UI References:**
   - Star Count Text: KÃ©o `StarCountText` vÃ o Ä‘Ã¢y
   - Star Icon Container: KÃ©o `StarIconContainer` vÃ o Ä‘Ã¢y
   - Star Icon Prefab: KÃ©o `StarIcon` prefab vÃ o Ä‘Ã¢y
   - Victory Panel: KÃ©o `VictoryPanel` vÃ o Ä‘Ã¢y (táº¡o á»Ÿ bÆ°á»›c 4)

   **Star Visual (Optional):**
   - Star Prefab: Táº¡o 3D star model hoáº·c sprite Ä‘á»ƒ rÆ¡i tá»« zombie
   - Star Drop Height: `2`

   **Animation Settings:**
   - Star Animation Duration: `0.5`
   - Scale Animation Curve: Default (hoáº·c tÃ¹y chá»‰nh)

   **Audio:**
   - Star Collect Sound: Import Ã¢m thanh thu tháº­p sao (coin.mp3, star.mp3, etc.)
   - Victory Sound: Import Ã¢m thanh chiáº¿n tháº¯ng

---

## ğŸ† BÆ°á»›c 4: Táº¡o Victory Panel

1. **Táº¡o Victory Panel**:
   ```
   Canvas
   â””â”€â”€ VictoryPanel (Panel)
       â”œâ”€â”€ Background (Image) - Semi-transparent black
       â”œâ”€â”€ ContentPanel (Panel)
       â”‚   â”œâ”€â”€ TitleText (TextMeshPro) - "ğŸ‰ VICTORY! ğŸ‰"
       â”‚   â”œâ”€â”€ MessageText (TextMeshPro) - "You collected all stars!"
       â”‚   â”œâ”€â”€ StarCountText (TextMeshPro) - "â­ 6/6 Stars!"
       â”‚   â””â”€â”€ ButtonContainer (Vertical Layout Group)
       â”‚       â”œâ”€â”€ ContinueButton (Button)
       â”‚       â”œâ”€â”€ RestartButton (Button)
       â”‚       â””â”€â”€ MainMenuButton (Button)
   ```

2. **Setup VictoryPanel**:
   - Anchor: Stretch All (Full Screen)
   - **Deactivate by default** (âœ… checkmark OFF)
   - Add Component: **Canvas Group**
   - Add Component: **VictoryPanel** script

3. **Configure VictoryPanel Script**:
   - KÃ©o cÃ¡c Text vÃ  Button references vÃ o Inspector
   - Canvas Group: Auto-assigned
   - Fade In Duration: `1`
   - Victory Music: Import victory music

---

## ğŸ§Ÿ BÆ°á»›c 5: Káº¿t Ná»‘i Vá»›i Zombie (NPC)

Zombie prefab **Ä‘Ã£ cÃ³ sáºµn** NPC component vá»›i `onDeath` event.

**Kiá»ƒm tra:**
1. Má»Ÿ Zombie prefab
2. Kiá»ƒm tra NPC component cÃ³ **onDeath** event
3. WaveManager Ä‘Ã£ tá»± Ä‘á»™ng subscribe vÃ o event nÃ y

**Code flow:**
```
Zombie dies â†’ NPC.Die() 
           â†’ onDeath.Invoke() 
           â†’ WaveManager.OnZombieDeath()
           â†’ StarCollectionSystem.AddStar()
```

âœ… **KhÃ´ng cáº§n setup thÃªm gÃ¬!**

---

## ğŸ® BÆ°á»›c 6: Testing

### Test trong Unity Editor:

1. **Play Scene**
2. **Diá»‡t zombie** (dÃ¹ng weapon/tool)
3. **Kiá»ƒm tra:**
   - âœ… Sao xuáº¥t hiá»‡n gÃ³c pháº£i UI
   - âœ… Animation sao chuyá»ƒn tá»« grey â†’ yellow
   - âœ… Text "â­ X/6" cáº­p nháº­t
   - âœ… Ã‚m thanh phÃ¡t khi thu tháº­p sao

4. **Diá»‡t 6 zombies:**
   - âœ… Victory Panel xuáº¥t hiá»‡n
   - âœ… Animation fade in
   - âœ… Particles/confetti (náº¿u cÃ³)
   - âœ… Ã‚m thanh chiáº¿n tháº¯ng

---

## ğŸ› ï¸ Troubleshooting

### âŒ Sao khÃ´ng xuáº¥t hiá»‡n:
- Kiá»ƒm tra `StarIconPrefab` Ä‘Ã£ assign chÆ°a
- Kiá»ƒm tra `StarIconContainer` cÃ³ Horizontal Layout Group chÆ°a
- Má»Ÿ Console xem cÃ³ lá»—i khÃ´ng

### âŒ Victory Panel khÃ´ng hiá»‡n:
- Kiá»ƒm tra VictoryPanel **INACTIVE** khi báº¯t Ä‘áº§u game
- Kiá»ƒm tra `victoryPanel` reference Ä‘Ã£ assign trong StarCollectionSystem
- Kiá»ƒm tra `maxStars = 6`

### âŒ KhÃ´ng cÃ³ Ã¢m thanh:
- Kiá»ƒm tra AudioClip Ä‘Ã£ import vÃ  assign
- Kiá»ƒm tra AudioSource component tá»“n táº¡i (script tá»± táº¡o)
- Kiá»ƒm tra volume settings

### âŒ Zombie cháº¿t nhÆ°ng khÃ´ng tÃ­nh sao:
- Má»Ÿ Console xem log "â­ Star collected!"
- Kiá»ƒm tra WaveManager cÃ³ `StarCollectionSystem.instance` khÃ´ng null
- Kiá»ƒm tra NPC component cÃ³ onDeath event vÃ  WaveManager Ä‘Ã£ subscribe

---

## ğŸ¨ Customization

### Thay Ä‘á»•i sá»‘ sao cáº§n thu tháº­p:
```csharp
StarCollectionSystem â†’ maxStars = 10 (thay vÃ¬ 6)
```

### Táº¡o hiá»‡u á»©ng sao 3D bay lÃªn:
1. Táº¡o 3D star model (hoáº·c dÃ¹ng Unity primitive + material)
2. Add script `StarParticleEffect.cs`
3. Assign vÃ o `StarCollectionSystem â†’ Star Prefab`

### TÃ¹y chá»‰nh mÃ u sáº¯c:
```csharp
// Trong StarCollectionSystem.cs
Color greyColor = new Color(0.3f, 0.3f, 0.3f, 0.5f); // Sao chÆ°a cÃ³
Color yellowColor = Color.yellow; // Sao Ä‘Ã£ cÃ³
```

---

## ğŸ“ Scripts ÄÃ£ Táº¡o

1. âœ… **StarCollectionSystem.cs** - Main logic system
2. âœ… **StarParticleEffect.cs** - Hiá»‡u á»©ng 3D star rÆ¡i
3. âœ… **VictoryPanel.cs** - UI panel chiáº¿n tháº¯ng
4. âœ… **WaveManager.cs** - ÄÃ£ updated (cÃ³ sáºµn)
5. âœ… **NPC.cs** - ÄÃ£ cÃ³ onDeath event (cÃ³ sáºµn)

---

## ğŸ¯ Next Steps - Sá»± Kiá»‡n Sau Khi Äá»§ 6 Sao

Báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c event sau trong `StarCollectionSystem.OnAllStarsCollected()`:

```csharp
private void OnAllStarsCollected()
{
    // 1. Má»Ÿ Boss Fight
    // BossFightManager.instance.StartBossFight();
    
    // 2. Load Scene má»›i
    // SceneManager.LoadScene("NextLevel");
    
    // 3. Unlock items/abilities
    // PlayerInventory.UnlockItem("SuperWeapon");
    
    // 4. Hiá»ƒn thá»‹ cutscene
    // CutsceneManager.Play("VictoryCutscene");
    
    // 5. Spawn reward chest
    // Instantiate(rewardChestPrefab, spawnPosition, Quaternion.identity);
    
    // ... tÃ¹y chá»‰nh theo game cá»§a báº¡n
}
```

---

## ğŸ‰ HoÃ n ThÃ nh!

Há»‡ thá»‘ng star collection Ä‘Ã£ hoÃ n chá»‰nh vá»›i:
- âœ… UI Ä‘áº¹p máº¯t
- âœ… Animation mÆ°á»£t mÃ 
- âœ… Ã‚m thanh pháº£n há»“i
- âœ… Victory screen
- âœ… Dá»… dÃ ng customize

**ChÃºc báº¡n phÃ¡t triá»ƒn game vui váº»! ğŸš€**
